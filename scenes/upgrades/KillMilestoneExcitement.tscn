[gd_scene load_steps=5 format=3 uid="uid://kill_milestone_excitement"]

[ext_resource type="Script" path="res://scripts/upgrades/base_upgrade.gd" id="1_base"]
[ext_resource type="Script" path="res://scripts/upgrades/trigger_upgrade.gd" id="2_trigger"]
[ext_resource type="Script" path="res://scripts/upgrades/effects/increase_excitement_effect.gd" id="3_excitement"]
[ext_resource type="Script" path="res://scripts/upgrades/effects/crowd_throw_effect.gd" id="4_throw"]

[node name="KillMilestoneExcitement" type="Node"]
script = ExtResource("1_base")
upgrade_name = "Crowd Pleaser"
description = "Every 10th enemy killed excites the crowd and they throw a weapon"
categories = Array[int]([1, 10, 20])
max_stacks = -1

[node name="TriggerUpgrade" type="Node" parent="."]
script = ExtResource("2_trigger")
trigger = 0
chance = 1.0
cooldown = 0.0
item_name_filter = ""
trigger_every_n = 10

[node name="IncreaseExcitementEffect" type="Node" parent="TriggerUpgrade"]
script = ExtResource("3_excitement")
excitement_amount = 20.0
scales_with_stacks = true

[node name="CrowdThrowEffect" type="Node" parent="TriggerUpgrade"]
script = ExtResource("4_throw")
item_categories = Array[int]([10])
